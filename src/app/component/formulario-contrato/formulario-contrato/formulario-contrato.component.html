<!-- Tab Content -->
<div class="tab-content mt-3" id="myTabContent">

  <!-- Todos los Contratos -->
  <div class="tab-pane fade show active" id="all" role="tabpanel">
  </div>

  <!-- Activos -->
  <div class="tab-pane fade" id="active" role="tabpanel">
    <div *ngIf="cargando" class="text-center my-4">
      <div class="spinner-border text-primary" role="status">
        <span class="visually-hidden">Cargando...</span>
      </div>
    </div>

    <div *ngIf="!cargando && filtrarPorEstado('Activo').length === 0" class="alert alert-info">
      No hay contratos activos.
    </div>

    <table class="table table-striped table-hover" *ngIf="!cargando && filtrarPorEstado('Activo').length > 0">
      <thead>
        <tr>
          <th>Nombre</th>
          <th>Descripción</th>
          <th>Fecha Inicio</th>
          <th>Fecha De vencimiento</th>
          <th>PDF</th>
          <th>Acciones</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let contrato of filtrarPorEstado('Activo')">
          <td>{{ contrato.clientName }}</td>
          <td>{{ contrato.description }}</td>
          <td>{{ contrato.startDate | date:'MMM d, yyyy' }}</td>
          <td>{{ contrato.expirationDate | date:'MMM d, yyyy' }}</td>
          <td>
            <button *ngIf="tienePdf(contrato)" class="btn btn-sm btn-outline-primary" (click)="descargarPdf(contrato._id, contrato.clientName)">
              <i class="fas fa-file-pdf me-1"></i> Descargar
            </button>
            <span *ngIf="!tienePdf(contrato)" class="text-muted">Sin PDF</span>
          </td>
          <td>
            <div class="btn-group">
              <button class="btn btn-sm btn-outline-info" (click)="verContrato(contrato)">
                <i class="fas fa-eye"></i>
              </button>
              <button class="btn btn-sm btn-outline-warning" data-bs-toggle="modal" data-bs-target="#contratoModal" (click)="editarContrato(contrato)">
                <i class="fas fa-edit"></i>
              </button>
              <button class="btn btn-sm btn-outline-danger" (click)="eliminarContrato(contrato._id)">
                <i class="fas fa-trash"></i>
              </button>
            </div>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <!-- Por Vencer -->
  <div class="tab-pane fade" id="expiring" role="tabpanel">
    <div *ngIf="cargando" class="text-center my-4">
      <div class="spinner-border text-primary" role="status">
        <span class="visually-hidden">Cargando...</span>
      </div>
    </div>

    <div *ngIf="!cargando && filtrarPorEstado('Por vencer').length === 0" class="alert alert-info">
      No hay contratos por vencer.
    </div>

    <table class="table table-striped table-hover" *ngIf="!cargando && filtrarPorEstado('Por vencer').length > 0">
      <thead>
        <tr>
          <th>Nombre</th>
          <th>Descripción</th>
          <th>Fecha Inicio</th>
          <th>Fecha De vencimiento</th>
          <th>PDF</th>
          <th>Acciones</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let contrato of filtrarPorEstado('Por vencer')">
          <td>{{ contrato.clientName }}</td>
          <td>{{ contrato.description }}</td>
          <td>{{ contrato.startDate | date:'MMM d, yyyy' }}</td>
          <td>{{ contrato.expirationDate | date:'MMM d, yyyy' }}</td>
          <td>
            <button *ngIf="tienePdf(contrato)" class="btn btn-sm btn-outline-primary" (click)="descargarPdf(contrato._id, contrato.clientName)">
              <i class="fas fa-file-pdf me-1"></i> Descargar
            </button>
            <span *ngIf="!tienePdf(contrato)" class="text-muted">Sin PDF</span>
          </td>
          <td>
            <div class="btn-group">
              <button class="btn btn-sm btn-outline-info" (click)="verContrato(contrato)">
                <i class="fas fa-eye"></i>
              </button>
              <button class="btn btn-sm btn-outline-warning" data-bs-toggle="modal" data-bs-target="#contratoModal" (click)="editarContrato(contrato)">
                <i class="fas fa-edit"></i>
              </button>
              <button class="btn btn-sm btn-outline-danger" (click)="eliminarContrato(contrato._id)">
                <i class="fas fa-trash"></i>
              </button>
            </div>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <!-- Vencidos -->
  <div class="tab-pane fade" id="expired" role="tabpanel">
    <div *ngIf="cargando" class="text-center my-4">
      <div class="spinner-border text-primary" role="status">
        <span class="visually-hidden">Cargando...</span>
      </div>
    </div>

    <div *ngIf="!cargando && filtrarPorEstado('Vencido').length === 0" class="alert alert-info">
      No hay contratos vencidos.
    </div>

    <table class="table table-striped table-hover" *ngIf="!cargando && filtrarPorEstado('Vencido').length > 0">
      <thead>
        <tr>
          <th>Nombre</th>
          <th>Descripción</th>
          <th>Fecha Inicio</th>
          <th>Fecha De vencimiento</th>
          <th>PDF</th>
          <th>Acciones</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let contrato of filtrarPorEstado('Vencido')">
          <td>{{ contrato.clientName }}</td>
          <td>{{ contrato.description }}</td>
          <td>{{ contrato.startDate | date:'MMM d, yyyy' }}</td>
          <td>{{ contrato.expirationDate | date:'MMM d, yyyy' }}</td>
          <td>
            <button *ngIf="tienePdf(contrato)" class="btn btn-sm btn-outline-primary" (click)="descargarPdf(contrato._id, contrato.clientName)">
              <i class="fas fa-file-pdf me-1"></i> Descargar
            </button>
            <span *ngIf="!tienePdf(contrato)" class="text-muted">Sin PDF</span>
          </td>
          <td>
            <div class="btn-group">
              <button class="btn btn-sm btn-outline-info" (click)="verContrato(contrato)">
                <i class="fas fa-eye"></i>
              </button>
              <button class="btn btn-sm btn-outline-warning" data-bs-toggle="modal" data-bs-target="#contratoModal" (click)="editarContrato(contrato)">
                <i class="fas fa-edit"></i>
              </button>
              <button class="btn btn-sm btn-outline-danger" (click)="eliminarContrato(contrato._id)">
                <i class="fas fa-trash"></i>
              </button>
            </div>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
</div>

